function tickerResize(t){if(495>=t)var e=' 			<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">														<tbody><tr>																							<td colspan="4">																					<div id="clock"></div>								</td>																							</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td style="color: rgb(255, 0, 0);" id="bitfinexBTCUSD">0</td>								<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceBTCUSD">0</td>																<td class="ticker_bold">Bitstamp:</td>															<td id="bitstampBTCUSD">0</td>															</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>										<td class="ticker_bold">OkCoin:</td>															<td style="color: rgb(255, 0, 0);" id="okcoinBTCCNY">0</td>								<td class="ticker_bold">Huobi:</td>																<td style="color: rgb(255, 0, 0);" id="huobiBTCCNY">0</td>								<td class="ticker_bold">BtcChina:</td>															<td style="color: rgb(0, 128, 0);" id="btcchinaBTCCNY">0</td>							</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td id="bitfinexLTCUSD">0</td>															<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceLTCUSD">0</td>																</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>										<td class="ticker_bold">Okcoin:</td>															<td style="color: rgb(0, 128, 0);" id="okcoinLTCCNY">0</td>									<td class="ticker_bold">Huobi:</td>																<td id="huobiLTCCNY">0</td>																</tr>																						</tbody></table>																				</div>																							';if(t>=495&&768>t)var e=' 			<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">														<tbody><tr>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td style="color: rgb(255, 0, 0);" id="bitfinexBTCUSD">0</td>								<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceBTCUSD">0</td>																<td class="ticker_bold">Bitstamp:</td>															<td id="bitstampBTCUSD">0</td>															</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>										<td class="ticker_bold">OkCoin:</td>															<td style="color: rgb(255, 0, 0);" id="okcoinBTCCNY">0</td>								<td class="ticker_bold">Huobi:</td>																<td style="color: rgb(255, 0, 0);" id="huobiBTCCNY">0</td>								<td class="ticker_bold">BtcChina:</td>															<td style="color: rgb(0, 128, 0);" id="btcchinaBTCCNY">0</td>							</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td id="bitfinexLTCUSD">0</td>															<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceLTCUSD">0</td>																<td rowspan="2" colspan="2">																					<div id="clock"></div>								</td>																							</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>										<td class="ticker_bold">Okcoin:</td>															<td style="color: rgb(0, 128, 0);" id="okcoinLTCCNY">0</td>									<td class="ticker_bold">Huobi:</td>																<td id="huobiLTCCNY">0</td>																</tr>																						</tbody></table>																				</div>																							';if(t>=768&&1280>t)var e=' 			<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">														<tbody><tr>																							<td colspan="2">																					<div id="clock"></div>								</td>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td style="color: rgb(255, 0, 0);" id="bitfinexBTCUSD">0</td>								<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceBTCUSD">0</td>																<td class="ticker_bold">Bitstamp:</td>															<td id="bitstampBTCUSD">0</td>															<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td id="bitfinexLTCUSD">0</td>															<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceLTCUSD">0</td>																</tr>																							<tr>																							<td colspan="2">																				&nbsp; &nbsp;																				</td>																							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>										<td class="ticker_bold">OkCoin:</td>															<td style="color: rgb(255, 0, 0);" id="okcoinBTCCNY">0</td>								<td class="ticker_bold">Huobi:</td>																<td style="color: rgb(255, 0, 0);" id="huobiBTCCNY">0</td>								<td class="ticker_bold">BtcChina:</td>															<td style="color: rgb(0, 128, 0);" id="btcchinaBTCCNY">0</td>							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>										<td class="ticker_bold">Okcoin:</td>															<td style="color: rgb(0, 128, 0);" id="okcoinLTCCNY">0</td>									<td class="ticker_bold">Huobi:</td>																<td id="huobiLTCCNY">0</td>																</tr>																						</tbody></table>																				</div>																							';if(t>=1280&&1366>t)var e=' 			<div id="clock"></div>					<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">														<tbody><tr>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>							<td class="ticker_bold">Bitfinex:</td>							<div><td id="bitfinexBTCUSD">0</td></div>							<td class="ticker_bold text-nowrap">BTCe:</td>							<div><td id="btceBTCUSD">0</td></div>							<td class="ticker_bold">Bitstamp:</td>							<div><td id="bitstampBTCUSD">0</td></div>							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>							<td class="ticker_bold">Huobi:</td>							<div><td id="huobiBTCCNY">0</td></div>							<td class="ticker_bold">BtcChina:</td>							<div><td id="btcchinaBTCCNY">0</td></div>							<td class="ticker_bold">OkCoin:</td>							<div><td id="okcoinBTCCNY">0</td></div>							<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>							<td class="ticker_bold">Bitfinex:</td>							<div><td id="bitfinexLTCUSD">0</td></div>							<td class="ticker_bold text-nowrap">BTCe:</td>							<div><td id="btceLTCUSD">0</td></div>							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>							<td class="ticker_bold">Okcoin:</td>							<div><td id="okcoinLTCCNY">0</td></div>							<td class="ticker_bold">Huobi:</td>							<div><td id="huobiLTCCNY">0</td></div>						</tr>																						</tbody></table>																				</div>																							';if(t>1366)var e=' 			<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">					<tr>							<td colspan="2">																					<div id="clock"></div>								</td>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>							<td class="ticker_bold">Bitfinex:</td>							<div><td id="bitfinexBTCUSD">0</td></div>							<td class="ticker_bold text-nowrap">BTCe:</td>							<div><td id="btceBTCUSD">0</td></div>							<td class="ticker_bold">Bitstamp:</td>							<div><td id="bitstampBTCUSD">0</td></div>							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>							<td class="ticker_bold">Huobi:</td>							<div><td id="huobiBTCCNY">0</td></div>							<td class="ticker_bold">BtcChina:</td>							<div><td id="btcchinaBTCCNY">0</td></div>							<td class="ticker_bold">OkCoin:</td>							<div><td id="okcoinBTCCNY">0</td></div>							<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>							<td class="ticker_bold">Bitfinex:</td>							<div><td id="bitfinexLTCUSD">0</td></div>							<td class="ticker_bold text-nowrap">BTCe:</td>							<div><td id="btceLTCUSD">0</td></div>							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>							<td class="ticker_bold">Okcoin:</td>							<div><td id="okcoinLTCCNY">0</td></div>							<td class="ticker_bold">Huobi:</td>							<div><td id="huobiLTCCNY">0</td></div>						</tr>					</table>					</div>																							';document.getElementById("ticker").innerHTML=e,tickerLoaded=!1,setTimeout(function(){updateTicker()},500)}function footerFirstload(t){if(1280>t&&$("#footerContainer").load("../assets/include/divFooterSmall.php"),t>=1280&&$("#footerContainer").load("../assets/include/divFooterBig.php"),1366>t)var e="305px",a="295px";else var e="415px",a="415px";$("#tradesTableDiv").slimscroll({height:e,width:"100%"}),$("#asksTableDiv").slimscroll({height:a,width:"100%"}),$("#bidsTableDiv").slimscroll({height:a,width:"100%"}),previousWidth=t}function footerResize(t){if(1280>t&&previousWidth>=1280&&$("#footerContainer").load("../assets/include/divFooterSmall.php"),t>=1280&&1280>previousWidth&&$("#footerContainer").load("../assets/include/divFooterBig.php"),1366>t)var e="305px",a="295px";else var e="415px",a="415px";$("#tradesTableDiv").slimscroll({height:e,width:"100%"}),$("#asksTableDiv").slimscroll({height:a,width:"100%"}),$("#bidsTableDiv").slimscroll({height:a,width:"100%"}),previousWidth=t}function makeOrderbooktables(){var t=' 	<div> 	  <table class=" table table-condensed table-hover" id="trades"> 		<tbody id="tradesTableBody"> 		</tbody> 	</div> 	</table> 	';document.getElementById("tradesTableDiv").innerHTML=t,$("#tradesTableDiv").slimscroll({height:"415px",width:"100%"});var e=' 			<div> 			  <table class=" table table-condensed table-hover" id="asks"> 				<tbody id="asksTableBody"> 				</tbody> 			</table> 	</div> 	';document.getElementById("asksTableDiv").innerHTML=e,$("#asksTableDiv").slimscroll({height:"415px",width:"100%"});var a=' 			<div> 			  <table class=" table table-condensed table-hover" id="bids"> 				<tbody id="bidsTableBody"> 				</tbody> 			</table> 	</div> 	';document.getElementById("bidsTableDiv").innerHTML=a,$("#bidsTableDiv").slimscroll({height:"415px",width:"100%"});var d=' 			<div> 			  <table class=" table table-condensed " id="volume1hTable"> 				<tbody id="volume1hTableBody"> 				</tbody> 			</table> 	</div> 	';document.getElementById("volume1hTableDiv").innerHTML=d;var o=' 			<div> 			  <table class=" table table-condensed " id="volume24hTable"> 				<tbody id="volume24hTableBody"> 				</tbody> 			</table> 	</div> 	';document.getElementById("volume24hTableDiv").innerHTML=o,ajaxVolumeTables(),ajaxOrderbookTables()}function ajaxVolumeTables(){urlVolume1Hour="../json/sellBuyVolumesLastHourETHBTC.json",urlVolume24Hour="../json/sellBuyVolumes24HourETHBTC.json",ajaxNewVolume1HourJson(urlVolume1Hour),ajaxNewVolume24HourJson(urlVolume24Hour)}function ajaxOrderbookTables(){urlDepth="../json/orderbooks/bitfinexDepthETHBTC.json",urlTrades="../json/orderbooks/bitfinexTradesETHBTC.json",ajaxNewDepthJson(urlDepth,0),ajaxNewTradesJson(urlTrades,0),tradesTableFirstLoad=!1}function ajaxNewTradesJson(urlTrades,counter){$.ajax({url:urlTrades,type:"GET",dataType:"json",timeout:3e3,cache:!1,success:function(data){data=eval(data),tradesOld=data,makeTradesTable(data)},error:function(t,e,a){"timeout"===e?(console.log(urlTrades+" timeout"),ajaxNewTradesJson(urlTrades)):console.log("Error: "+urlTrades+" || "+e),5>counter&&(counter+=1,ajaxNewTradesJson(urlTrades,counter))}})}function ajaxNewDepthJson(urlDepth,counter){$.ajax({url:urlDepth,type:"GET",dataType:"json",timeout:3e3,cache:!1,success:function(data){data=eval(data),depthBidsOld=data.bids,depthAsksOld=data.asks,makeBidsTable(data.bids),makeAsksTable(data.asks)},error:function(t,e,a){"timeout"===e?(console.log(urlDepth+" timeout"),ajaxNewDepthJson(urlDepth)):console.log("Error: "+urlDepth+" || "+e),5>counter&&(counter+=1,ajaxNewDepthJson(urlDepth,counter))}})}function ajaxNewVolume1HourJson(urlVolume1Hour){$.ajax({url:urlVolume1Hour,type:"GET",dataType:"json",timeout:3e3,cache:!1,success:function(data){data=eval(data),makeVolume1hTable(data)},error:function(t,e,a){"timeout"===e?console.log(urlVolume1Hour+" timeout"):console.log("Error: "+urlVolume1Hour+" || "+e)}})}function ajaxNewVolume24HourJson(urlVolume24Hour){$.ajax({url:urlVolume24Hour,type:"GET",dataType:"json",timeout:3e3,cache:!1,success:function(data){data=eval(data),makeVolume24hTable(data)},error:function(t,e,a){"timeout"===e?console.log(urlVolume24Hour+" timeout"):console.log("Error: "+urlVolume24Hour+" || "+e)}})}function startwebsocketio(){var url="https://"+window.location.hostname+":3001";socket=io.connect(url,{secure:!0});var channels=["orderbookETHBTC","bfxdataToday","bfxdataToday1Minute","bitfinexDepthETHBTC","bitfinexDepthChartETHBTCasks","bitfinexDepthChartETHBTCbids","bitfinexTradesETHBTC","sellBuyRatio24HourETHBTC","sellBuyRatioLastHourETHBTC","sellBuyVolumes24HourETHBTC","sellBuyVolumesLastHourETHBTC"];socket.on("connect",function(){socket.emit("adduser",randomUsername()),channels.forEach(function(t){socket.emit("switchChannel",t)})}),socket.on("dataupdate",function(username,data){try{jsonObject=data,jsonObject=JSON.parse(jsonObject)}catch(ex){}try{var keyname=Object.keys(jsonObject);"ticker_rt"==keyname&&(data=jsonObject[keyname],updateTickerValues(data)),"bfxdataToday"!=keyname&&"bfxdataToday1Minute"!=keyname||(data=jsonObject[keyname],updateValues(data)),"bitfinexDepthETHBTC"==keyname&&(data=jsonObject[keyname],tradesTableFirstLoad||(data=eval(data),depthBidsNew=data.bids,depthAsksNew=data.asks,combineOldNewDepth())),"bitfinexTradesETHBTC"==keyname&&(data=jsonObject[keyname],tradesTableFirstLoad||(data=eval(data),tradesNew=data,combineOldNewTrades())),"sellBuyVolumesLastHourETHBTC"==keyname&&(data=jsonObject[keyname],tradesTableFirstLoad||(data=eval(data),makeVolume1hTable(data))),"sellBuyVolumes24HourETHBTC"==keyname&&(data=jsonObject[keyname],tradesTableFirstLoad||(data=eval(data),makeVolume24hTable(data))),"bitfinexDepthChartETHBTCbids"==keyname&&(data=jsonObject[keyname],data=eval(data),graphMarketDepthETHBTC.series[0].setData(data,!0,!0,!0)),"bitfinexDepthChartETHBTCasks"==keyname&&(data=jsonObject[keyname],data=eval(data),graphMarketDepthETHBTC.series[1].setData(data,!0,!0,!0)),"sellBuyRatioLastHourETHBTC"==keyname&&(data=jsonObject[keyname],data=eval(data),lastHourRatioChart.series[0].setData(data,!0,!0,!0)),"sellBuyRatio24HourETHBTC"==keyname&&(data=jsonObject[keyname],data=eval(data),last24HourRatioChart.series[0].setData(data,!0,!0,!0))}catch(ex){}})}function randomUsername(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e=8,a="user_",d=0;e>d;d++){var o=Math.floor(Math.random()*t.length);a+=t.substring(o,o+1)}str=window.location.href,str=str.replace("https://www.bfxdata.com/",""),str=str.replace("https://bfxdata.com/",""),str=str.replace("http://www.bfxdata.com/",""),str=str.replace("http://bfxdata.com/",""),str=str.replace(/\//g,"_"),a+="_"+str;var s=new Date,r=s.getTime();return a+="_"+r}function updateTicker(){$.ajax({url:"../json/ticker_rt.json",type:"GET",dataType:"json",timeout:3e3,cache:!1,success:function(data){data=eval(data),updateTickerValues(data),tickerLoaded=!0},error:function(t,e,a){"timeout"===e?console.log("Error: ticker datarequest timeout"):console.log("Error: "+e)}})}function updateTickerValue(t,e){var a="#"+t;e=parseFloat(e);for(var d=$(a).text();-1!=d.indexOf(",");)d=d.replace(",","");d=parseFloat(d);var o=t.substr(t.length-6);if("ETHBTC"==o)var s=3;else if("ETHBTC"==o)var s=5;else if("BTCCNY"==o)var s=2;else if("LTCCNY"==o)var s=2;else var s=1;e>d&&(tickerLoaded&&$(a).css("color","green"),$(a).html(formatTickerNumber(e,s))),d>e&&(tickerLoaded&&$(a).css("color","red"),$(a).html(formatTickerNumber(e,s)))}function updateTickerValues(t){jQuery.each(t,function(t,e){updatedValue=e,updateTickerValue(t,updatedValue)})}function formatTickerNumber(t,e){t=t.toFixed(e)+"",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function bfxdataToday(){$.ajax({url:"../json/bfxdataToday.json",type:"GET",dataType:"json",timeout:3e3,cache:!1,success:function(data){data=eval(data),updateValues(data)},error:function(t,e,a){"timeout"===e?console.log("Statstabale timeout"):console.log("Error: "+e)}})}function bfxdataToday1minute(){$.ajax({url:"../json/bfxdataToday1Minute.json",type:"GET",dataType:"json",timeout:3e3,cache:!1,success:function(data){data=eval(data),updateValues(data),bfxdataTodayloaded=!0},error:function(t,e,a){"timeout"===e?console.log("Statstabale 1m timeout"):console.log("Error: "+e)}})}function updateValue(t,e){var a="#"+t;e=parseFloat(e);for(var d=$(a).text();-1!=d.indexOf(",");)d=d.replace(",","");d=parseFloat(d);var o=t.substr(0,t.length-6);if("priceETHBTC"==t||"bidETHBTC"==t||"askETHBTC"==t||"minETHBTC"==t||"maxETHBTC"==t||"maxETHBTC"==t||"buyPercentage"==o||"change24rel"==o||"volumeChange"==o||"vwap24ETHBTC"==t||"change24absETHBTC"==t||"maxETHBTC"==t)var s=5;else if("todayVolume"==o||"volumeWeek"==o||"volumeMonth"==o||"swapVolume1hUSD"==t||"swapVolume1hBTC"==t||"swapVolume1hLTC"==t||"swapVolume24hUSD"==t||"swapVolume24hBTC"==t||"swapVolume24hLTC"==t)var s=0;else if("changeAbsoluteTotalAvgRateUSD"==t||"changeAbsoluteTotalAvgRateBTC"==t||"changeAbsoluteTotalAvgRateLTC"==t)var s=7;else if("totalAmountUSD"==t||"totalAmountBTC"==t||"totalAmountLTC"==t||"changeAbsoluteTotalAmountUSD"==t||"changeAbsoluteTotalAmountBTC"==t||"changeAbsoluteTotalAmountLTC"==t)var s=0;else var s=5;e=formatNumber(e,s),e=e.split(",").join(""),e=parseFloat(e),e>d&&(bfxdataTodayloaded&&($(a).parent().animate({backgroundColor:"rgba(90,151,112,0.3)"},300),$(a).parent().animate({backgroundColor:"rgba(255,255,255,0)"},3e3)),"change24rel"==o||"volumeChange"==o||"lastSwapUSD"==t||"lastSwapBTC"==t||"lastSwapLTC"==t?$(a).html(formatNumber(e,s)+" %"):$(a).html(formatNumber(e,s))),d>e&&(bfxdataTodayloaded&&($(a).parent().animate({backgroundColor:"rgba(204,63,51,0.3)"},300),$(a).parent().animate({backgroundColor:"rgba(255,255,255,0)"},3e3)),"change24rel"==o||"volumeChange"==o||"lastSwapUSD"==t||"lastSwapBTC"==t||"lastSwapLTC"==t?$(a).html(formatNumber(e,s)+" %"):$(a).html(formatNumber(e,s))),"change24rel"!=o&&"volumeChange"!=o&&"change24abs"!=o&&"changeAbsoluteTotalAmountUSD"!=t&&"changeAbsoluteTotalAmountBTC"!=t&&"changeAbsoluteTotalAmountLTC"!=t&&"changeAbsoluteTotalAvgRateUSD"!=t&&"changeAbsoluteTotalAvgRateBTC"!=t&&"changeAbsoluteTotalAvgRateLTC"!=t||changeFontColor(a,e)}function updateValues(t){jQuery.each(t,function(t,e){updatedValue=e[0],updateValue(t,updatedValue)})}function changeFontColor(t,e){e>0&&$(t).css("color","green"),0>e&&$(t).css("color","red")}function formatNumber(t,e){t=t.toFixed(e)+"",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function startTime(){var t=new Date,e=t.getUTCHours(),a=t.getMinutes(),d=t.getSeconds();e=checkTime(e),a=checkTime(a),d=checkTime(d),document.getElementById("clock").innerHTML=e+":"+a+":"+d+" (UTC)&nbsp &nbsp &nbsp;";setTimeout(function(){startTime()},500)}function checkTime(t){return 10>t&&(t="0"+t),t}function combineOldNew(){var t=[];for(i=0;i<tradesOld.length;i++){var e=tradesOld[i].tid;t.indexOf(e)<0&&t.push(e)}var a=[],d=[];for(tradesCombi=_.union(tradesOld,tradesNew),i=0;i<tradesCombi.length;i++){var e=tradesCombi[i].tid;d.indexOf(e)<0&&(d.push(e),a.push(tradesCombi[i]))}for(a.sort(function(t,e){return e.tid-t.tid}),addToTradesTable(a,t),oldDepthArray=[],i=0;i<depthBidsOld.length;i++){var o=depthBidsOld[i].price+"_"+depthBidsOld[i].amount;oldDepthArray.indexOf(o)<0&&oldDepthArray.push(o)}for(newDepthArray=[],i=0;i<depthBidsNew.length;i++){var o=depthBidsNew[i].price+"_"+depthBidsNew[i].amount;newDepthArray.indexOf(o)<0&&newDepthArray.push(o)}var s=[],r=[];for(depthBidsCombi=_.union(depthBidsOld,depthBidsNew),i=0;i<depthBidsCombi.length;i++){var o=depthBidsCombi[i].price+"_"+depthBidsCombi[i].amount;r.indexOf(o)<0&&(r.push(o),s.push(depthBidsCombi[i]))}for(s.sort(function(t,e){return e.price-t.price}),addToDepthBidsTable(s,newDepthArray,oldDepthArray),oldDepthArray=[],i=0;i<depthAsksOld.length;i++){var o=depthAsksOld[i].price+"_"+depthAsksOld[i].amount;oldDepthArray.indexOf(o)<0&&oldDepthArray.push(o)}for(newDepthArray=[],i=0;i<depthAsksNew.length;i++){var o=depthAsksNew[i].price+"_"+depthAsksNew[i].amount;newDepthArray.indexOf(o)<0&&newDepthArray.push(o)}var l=[],n=[];for(depthAsksCombi=_.union(depthAsksOld,depthAsksNew),i=0;i<depthAsksCombi.length;i++){var o=depthAsksCombi[i].price+"_"+depthAsksCombi[i].amount;n.indexOf(o)<0&&(n.push(o),l.push(depthAsksCombi[i]))}l.sort(function(t,e){return e.price-t.price}),addToDepthAsksTable(l,newDepthArray,oldDepthArray)}function containsObject(t,e){var a;for(a=0;a<list.length;a++)if(list[a]===t)return!0;return!1}function combineOldNewTrades(){var t=[];for(i=0;i<tradesOld.length;i++){var e=tradesOld[i].tid;t.indexOf(e)<0&&t.push(e)}var a=[],d=[];for(tradesCombi=_.union(tradesOld,tradesNew),i=0;i<tradesCombi.length;i++){var e=tradesCombi[i].tid;d.indexOf(e)<0&&(d.push(e),a.push(tradesCombi[i]))}a.sort(function(t,e){return e.tid-t.tid}),addToTradesTable(a,t)}function combineOldNewDepth(){for(oldDepthArray=[],i=0;i<depthBidsOld.length;i++){var t=depthBidsOld[i].price+"_"+depthBidsOld[i].amount;oldDepthArray.indexOf(t)<0&&oldDepthArray.push(t)}for(newDepthArray=[],i=0;i<depthBidsNew.length;i++){var t=depthBidsNew[i].price+"_"+depthBidsNew[i].amount;newDepthArray.indexOf(t)<0&&newDepthArray.push(t)}var e=[],a=[];for(depthBidsCombi=_.union(depthBidsOld,depthBidsNew),i=0;i<depthBidsCombi.length;i++){var t=depthBidsCombi[i].price+"_"+depthBidsCombi[i].amount;a.indexOf(t)<0&&(a.push(t),e.push(depthBidsCombi[i]))}for(e.sort(function(t,e){return e.price-t.price}),addToDepthBidsTable(e,newDepthArray,oldDepthArray),oldDepthArray=[],i=0;i<depthAsksOld.length;i++){var t=depthAsksOld[i].price+"_"+depthAsksOld[i].amount;oldDepthArray.indexOf(t)<0&&oldDepthArray.push(t)}for(newDepthArray=[],i=0;i<depthAsksNew.length;i++){var t=depthAsksNew[i].price+"_"+depthAsksNew[i].amount;newDepthArray.indexOf(t)<0&&newDepthArray.push(t)}var d=[],o=[];for(depthAsksCombi=_.union(depthAsksOld,depthAsksNew),i=0;i<depthAsksCombi.length;i++){var t=depthAsksCombi[i].price+"_"+depthAsksCombi[i].amount;o.indexOf(t)<0&&(o.push(t),d.push(depthAsksCombi[i]))}d.sort(function(t,e){return e.price-t.price}),addToDepthAsksTable(d,newDepthArray,oldDepthArray)}function makeAsksTable(t){$("#asksTableBody").empty();var e=0;jQuery.each(t,function(t,a){var d=parseFloat(a.price),o=parseFloat(a.amount);e+=o;$("#asksTableBody").append("<tr><td class='td_price'>"+formatNumber(d,6)+"</td><td class='td_amount'>"+formatNumber(o,2)+"</td><td class='td_sum'>"+formatNumber(e,2)+"</td></tr>")})}function makeBidsTable(t){$("#bidsTableBody").empty();var e=0;jQuery.each(t,function(t,a){var d=parseFloat(a.price),o=parseFloat(a.amount);e+=o;$("#bidsTableBody").append("<tr><td class='td_price'>"+formatNumber(d,6)+"</td><td class='td_amount'>"+formatNumber(o,2)+"</td><td class='td_sum'>"+formatNumber(e,2)+"</td></tr>")})}function makeTradesTable(t){$("#tradesTableBody").empty(),jQuery.each(t,function(t,e){var a=parseFloat(e.price),d=parseFloat(e.amount),o=e.type;"buy"==o&&$("#tradesTableBody").append("<tr><td class='td_price' >"+formatNumber(a,6)+"</td><td class='td_amount' >"+formatNumber(d,2)+"</td><td class='td_type' style='color:green;'>"+o+"</td><td class='td_timestamp'>"+timeConverter(e.timestamp)+"</td></tr>"),"sell"==o&&$("#tradesTableBody").append("<tr><td class='td_price' >"+formatNumber(a,6)+"</td><td class='td_amount' >"+formatNumber(d,2)+"</td><td class='td_type' style='color:red;'>"+o+"</td><td class='td_timestamp'>"+timeConverter(e.timestamp)+"</td></tr>")});var e=t[0];$(document).attr("title",e.price+" ETHBTC | BFXdata.com"),firstLoad=!1}function makeVolume1hTable(t){$("#volume1hTableBody").empty();var e=parseFloat(t[2]),a=parseFloat(t[1]),d=parseFloat(t[0]);$("#volume1hTableBody").append("<tr><td class='volumTableLabel'>Sell</td><td class='volumTableValue'>"+formatNumber(d,3)+"</td></tr><tr><td class='volumTableLabel'>Buy</td><td class='volumTableValue'>"+formatNumber(a,3)+"</td></tr><tr><td class='volumTableLabel'>Total</td><td class='volumTableValue'>"+formatNumber(e,3)+"</td></tr>")}function makeVolume24hTable(t){$("#volume24hTableBody").empty();var e=parseFloat(t[2]),a=parseFloat(t[1]),d=parseFloat(t[0]);$("#volume24hTableBody").append("<tr><td class='volumTableLabel'>Sell</td><td class='volumTableValue'>"+formatNumber(d,3)+"</td></tr><tr><td class='volumTableLabel'>Buy</td><td class='volumTableValue'>"+formatNumber(a,3)+"</td></tr><tr><td class='volumTableLabel'>Total</td><td class='volumTableValue'>"+formatNumber(e,3)+"</td></tr>")}function addToDepthBidsTable(t,e,a){var d=0;$("#bidsTableBody").empty(),jQuery.each(t,function(t,o){var s=parseFloat(o.price),r=parseFloat(o.amount),i=(o.price+"_"+o.amount,_.filter(a,function(t){return-1!==t.indexOf(s+"_")}));if(i.length>0)var l=!0,n=i[0].split("_").pop();else var l=!1;var c=_.filter(e,function(t){return-1!==t.indexOf(s+"_")});if(c.length>0)var u=!0,b=c[0].split("_").pop();else var u=!1;1==l&&1==u&&(b==n?(d+=r,$("#bidsTableBody").append("<tr><td class='td_price'>"+formatNumber(s,6)+"</td><td class='td_amount'>"+formatNumber(r,2)+"</td><td class='td_sum'>"+formatNumber(d,2)+"</td></tr>")):b>n?r==b&&(d+=r,$("#bidsTableBody").append("<tr><td class='td_price'>"+formatNumber(s,6)+"</td><td class='td_amount amount_bids_plus'>"+formatNumber(r,2)+"</td><td class='td_sum'>"+formatNumber(d,2)+"</td></tr>")):n>b&&r==b&&(d+=r,$("#bidsTableBody").append("<tr><td class='td_price'>"+formatNumber(s,6)+"</td><td class='td_amount amount_bids_minus'>"+formatNumber(r,2)+"</td><td class='td_sum'>"+formatNumber(d,2)+"</td></tr>"))),1==l&&0==u&&$("#bidsTableBody").append("<tr class='removed_bids_tr'><td class='td_price'><div class='removed_bids_table_entry'>"+formatNumber(s,6)+"</div></td><td class='td_amount'><div class='removed_bids_table_entry'>"+formatNumber(r,2)+"</div></td><td class='td_sum'><div class='removed_bids_table_entry'> - </div></td></tr>"),0==l&&1==u&&(d+=r,$("#bidsTableBody").append("<tr class='added_bids_tr'><td class='td_price'><div class='new_bids_table_entry'>"+formatNumber(s,6)+"</div></td><td class='td_amount'><div class='new_bids_table_entry'>"+formatNumber(r,2)+"</div></td><td class='td_sum'><div class='new_bids_table_entry'>"+formatNumber(d,2)+"</div></td></tr>"))}),$(".removed_bids_table_entry").css("text-decoration","line-through"),setTimeout(function(){$(".removed_bids_table_entry").slideUp(500)},4500),setTimeout(function(){$(".removed_bids_tr").remove()},5e3),$(".amount_bids_plus").css("color","green"),$(".amount_bids_minus").css("color","red"),$(".amount_bids_plus").css("font-weight","bold"),$(".amount_bids_minus").css("font-weight","bold"),$(".new_bids_table_entry").css("font-weight","bold"),$(".new_bids_table_entry").hide(),setTimeout(function(){$(".new_bids_table_entry").slideDown(1e3)},1),setTimeout(function(){$(".new_bids_table_entry").css("font-weight","300")},6e3),setTimeout(function(){$(".amount_bids_plus").css("font-weight","300")},6e3),setTimeout(function(){$(".amount_bids_minus").css("font-weight","300")},6e3),setTimeout(function(){$(".amount_bids_plus").css("color","#666666")},6e3),setTimeout(function(){$(".amount_bids_minus").css("color","#666666")},6e3),depthBidsOld=depthBidsNew}function addToDepthAsksTable(t,e,a){t.reverse();var d=0;$("#asksTableBody").empty(),jQuery.each(t,function(t,o){var s=parseFloat(o.price),r=parseFloat(o.amount),i=(o.price+"_"+o.amount,_.filter(a,function(t){return-1!==t.indexOf(s+"_")}));if(i.length>0)var l=!0,n=i[0].split("_").pop();else var l=!1;var c=_.filter(e,function(t){return-1!==t.indexOf(s+"_")});if(c.length>0)var u=!0,b=c[0].split("_").pop();else var u=!1;1==l&&1==u&&(b==n?(d+=r,$("#asksTableBody").append("<tr><td class='td_price'>"+formatNumber(s,6)+"</td><td class='td_amount'>"+formatNumber(r,2)+"</td><td class='td_sum'>"+formatNumber(d,2)+"</td></tr>")):b>n?r==b&&(d+=r,$("#asksTableBody").append("<tr><td class='td_price'>"+formatNumber(s,6)+"</td><td class='td_amount amount_asks_plus'>"+formatNumber(r,2)+"</td><td class='td_sum'>"+formatNumber(d,2)+"</td></tr>")):n>b&&r==b&&(d+=r,$("#asksTableBody").append("<tr><td class='td_price'>"+formatNumber(s,6)+"</td><td class='td_amount amount_asks_minus'>"+formatNumber(r,2)+"</td><td class='td_sum'>"+formatNumber(d,2)+"</td></tr>"))),1==l&&0==u&&$("#asksTableBody").append("<tr class='removed_asks_tr'><td class='td_price'><div class='removed_asks_table_entry'>"+formatNumber(s,6)+"</div></td><td class='td_amount'><div class='removed_asks_table_entry'>"+formatNumber(r,2)+"</div></td><td class='td_sum'><div class='removed_asks_table_entry'> - </div></td></tr>"),0==l&&1==u&&(d+=r,$("#asksTableBody").append("<tr class='added_asks_tr'><td class='td_price'><div class='new_asks_table_entry'>"+formatNumber(s,6)+"</div></td><td class='td_amount'><div class='new_asks_table_entry'>"+formatNumber(r,2)+"</div></td><td class='td_sum'><div class='new_asks_table_entry'>"+formatNumber(d,2)+"</div></td></tr>"))}),$(".removed_asks_table_entry").css("text-decoration","line-through"),setTimeout(function(){$(".removed_asks_table_entry").slideUp(500)},4500),setTimeout(function(){$(".removed_asks_tr").remove()},5e3),$(".amount_asks_plus").css("color","green"),$(".amount_asks_minus").css("color","red"),$(".amount_asks_plus").css("font-weight","bold"),$(".amount_asks_minus").css("font-weight","bold"),$(".new_asks_table_entry").css("font-weight","bold"),$(".new_asks_table_entry").hide(),setTimeout(function(){$(".new_asks_table_entry").slideDown(1e3)},1),setTimeout(function(){$(".new_asks_table_entry").css("font-weight","300")},6e3),setTimeout(function(){$(".amount_asks_plus").css("font-weight","300")},6e3),setTimeout(function(){$(".amount_asks_minus").css("font-weight","300")},6e3),setTimeout(function(){$(".amount_asks_plus").css("color","#666666")},6e3),setTimeout(function(){$(".amount_asks_minus").css("color","#666666")},6e3),depthAsksOld=depthAsksNew}function addToTradesTable(t,e){$("#tradesTableBody").empty(),newTID=parseInt(t[0].tid),t.reverse(),jQuery.each(t,function(t,e){var a=parseFloat(e.price),d=parseFloat(e.amount),o=e.type,s=e.tid;s>lastTID?"buy"==o?$("#tradesTableBody").prepend("<tr class='new_table_entry'><td class='td_price'>"+formatNumber(a,6)+"</td><td class='td_amount'>"+formatNumber(d,2)+"</td><td class='td_type' style='color:green;'>"+e.type+"</td><td class='td_timestamp' >"+timeConverter(e.timestamp)+"</td></tr>"):$("#tradesTableBody").prepend("<tr class='new_table_entry'><td class='td_price'>"+formatNumber(a,6)+"</td><td class='td_amount' >"+formatNumber(d,2)+"</td><td class='td_type' style='color:red;'>"+e.type+"</td><td class='td_timestamp' >"+timeConverter(e.timestamp)+"</td></tr>"):"buy"==o?$("#tradesTableBody").prepend("<tr><td class='td_price'>"+formatNumber(a,6)+"</td><td class='td_amount'>"+formatNumber(d,2)+"</td><td class='td_type' style='color:green;'>"+e.type+"</td><td class='td_timestamp'>"+timeConverter(e.timestamp)+"</td></tr>"):$("#tradesTableBody").prepend("<tr><td class='td_price'>"+formatNumber(a,6)+"</td><td class='td_amount'>"+formatNumber(d,2)+"</td><td class='td_type' style='color:red;'>"+e.type+"</td><td class='td_timestamp'>"+timeConverter(e.timestamp)+"</td></tr>")}),$(".new_table_entry").css("font-weight","bold"),setTimeout(function(){
$(".new_table_entry").css("font-weight","300")},6e3);var a=t.pop();$(document).attr("title",a.price+" ETHBTC | BFXdata.com"),tradesOld=t,lastTID=newTID}function mergeSort(t){if(t.length>1){var e=t.slice(0,t.length/2),a=t.slice(t.length/2);return e=mergeSort(e),a=mergeSort(a),merge(e,a)}return t}function merge(t,e){for(var a=[],d=0;t.length||e.length;)d=t.length&&e.length?t[0]<e[0]?t.shift():e.shift():t.length?t.shift():e.shift(),$.inArray(d,a)<0&&a.push(d);return a}function formatNumber(t,e){t=t.toFixed(e)+"",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function timeConverter(t){var e=new Date(1e3*t),a=(e.getFullYear(),e.getMonth(),e.getDate(),e.getUTCHours());10>a&&(a="0"+a);var d=e.getMinutes();10>d&&(d="0"+d);var o=e.getSeconds();10>o&&(o="0"+o);var s=a+":"+d+":"+o;return s}var socket,tickerLoaded=!1,previousWidth,bfxdataTodayloaded=!1,tradesTableFirstLoad=!0,lastTID,tradesOld,tradesCurrent,tradesNew,depthAsksOld,depthAsksCurrent,depthAsksNew,depthBidsOld,depthBidsCurrent,depthBidsNew;$(document).ready(function(){bfxdataToday(),bfxdataToday1minute(),makeOrderbooktables();var t=$(window).width();tickerResize(t),footerFirstload(t),startwebsocketio(),startTime()}),$(window).resize(function(){var t=$(window).width();tickerResize(t),footerResize(t)});var graphMarketDepthETHBTC,minZoom,maxZoom,lowestAsk,lowestBid,highestAsk,highestBid;$(function(){$.getJSON("../json/orderbooks/bitfinexDepthChartETHBTCbids.json",function(t){$.getJSON("../json/orderbooks/bitfinexDepthChartETHBTCasks.json",function(e){highestAsk=parseFloat(e[e.length-1][0]),lowestAsk=parseFloat(e[0][0]),highestBid=parseFloat(t[t.length-1][0]),lowestBid=parseFloat(t[0][0]),minZoom=highestBid-.1*highestBid,maxZoom=lowestAsk+.1*lowestAsk,lowestBid>=minZoom&&(minZoom=lowestBid),maxZoom>=highestAsk&&(maxZoom=highestAsk),Highcharts.setOptions({global:{useUTC:!0}}),graphMarketDepthETHBTC=new Highcharts.Chart({chart:{renderTo:"marketDepthChart",type:"area",zoomType:"x",panning:!0,panKey:"shift",animation:!1,spacingTop:-10,spacingBottom:0,spacingLeft:0,spacingRight:0,events:{load:function(){this.xAxis[0].setExtremes(minZoom,maxZoom)}},resetZoomButton:{theme:{display:"none"}}},navigation:{enabled:!1,buttonOptions:{verticalAlign:"top",x:-60,y:-127}},credits:{enabled:!1},title:{text:"",style:{display:"none"}},xAxis:{gridLineWidth:1,lineWidth:1,minorTickInterval:"auto",minorTickColor:"#FEFEFE",title:{enabled:!1,text:"Price ETHBTC",style:{fontWeight:"normal",display:"none"}}},yAxis:{gridLineWidth:1,minorTickInterval:"auto",minorTickColor:"#FEFEFE",opposite:!0,labels:{align:"left",x:5,y:0,enabled:!0},title:{enabled:!1,text:"Volume Sum",style:{fontWeight:"normal",display:"none"}}},legend:{align:"center",verticalAlign:"top",y:10,floating:!0,backgroundColor:"#FFFFFF",shadow:!0,enabled:!1},plotOptions:{series:{lineWidth:1,animation:!1,marker:{enabled:!1}}},tooltip:{crosshairs:[!0,!0],formatter:function(){var t="Sum: "+formatNumber(this.y,2);return t+="<br/>Price: "+this.x}},series:[{name:"Bids",id:"bids",data:t,color:"rgba(90,151,112,1.0)",fillColor:"rgba(90,151,112,0.2)"},{name:"Asks",id:"asks",data:e,color:"rgba(204,63,51,1.0)",fillColor:"rgba(204,63,51,0.2)"}]})})})}),$("#zoomIn").click(function(){minZoom-=.1*lowestAsk,maxZoom+=.1*lowestAsk,lowestBid>=minZoom&&(minZoom=lowestBid),maxZoom>=highestAsk&&(maxZoom=highestAsk),graphMarketDepthETHBTC.xAxis[0].setExtremes(minZoom,maxZoom)}),$("#zoomOut").click(function(){minZoom+=.1*lowestAsk,maxZoom-=.1*lowestAsk,lowestBid>=minZoom&&(minZoom=lowestBid),maxZoom>=highestAsk&&(maxZoom=highestAsk),graphMarketDepthETHBTC.xAxis[0].setExtremes(minZoom,maxZoom)});var lastHourRatioChart;$(function(){$.getJSON("../json/sellBuyRatioLastHourETHBTC.json",function(t){Highcharts.setOptions({colors:["rgba(204,63,51,0.8)","rgba(90,151,112,0.8)"]}),lastHourRatioChart=new Highcharts.Chart({chart:{renderTo:"ratioChart1h",plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,animation:!0,spacingTop:-100,spacingBottom:0,spacingLeft:30,spacingRight:30,backgroundColor:"rgba(255, 255, 255, 0)"},title:{text:"Sell / Buy Ratio (24h)",align:"center",verticalAlign:"middle",style:{fontSize:"130%",display:"none"},y:-60},exporting:{enabled:!1},credits:{enabled:!1},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-20,style:{fontWeight:"bold",color:"white",textShadow:"0px 1px 2px black"}},animation:!0,startAngle:-90,endAngle:90,center:["50%","75%"]}},series:[{type:"pie",name:"Buy / Sell Ratio",innerSize:"50%",data:t}]})})});var last24HourRatioChart;$(function(){$.getJSON("../json/sellBuyRatio24HourETHBTC.json",function(t){Highcharts.setOptions({colors:["rgba(204,63,51,0.8)","rgba(90,151,112,0.8)"]}),last24HourRatioChart=new Highcharts.Chart({chart:{renderTo:"ratioChart24h",plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,animation:!0,spacingTop:-100,spacingBottom:0,spacingLeft:30,spacingRight:30,backgroundColor:"rgba(255, 255, 255, 0)"},title:{text:"Sell / Buy Ratio (24h)",align:"center",verticalAlign:"middle",style:{fontSize:"130%",display:"none"},y:-60},exporting:{enabled:!1},credits:{enabled:!1},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{dataLabels:{enabled:!0,distance:-20,style:{fontWeight:"bold",color:"white",textShadow:"0px 1px 2px black"}},animation:!0,startAngle:-90,endAngle:90,center:["50%","75%"]}},series:[{type:"pie",name:"Buy / Sell Ratio",innerSize:"50%",data:t}]})})});