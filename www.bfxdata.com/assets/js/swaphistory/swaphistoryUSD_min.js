function tickerResize(t){if(495>=t)var e=' 			<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">														<tbody><tr>																							<td colspan="4">																					<div id="clock"></div>								</td>																							</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td style="color: rgb(255, 0, 0);" id="bitfinexBTCUSD">0</td>								<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceBTCUSD">0</td>																<td class="ticker_bold">Bitstamp:</td>															<td id="bitstampBTCUSD">0</td>															</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>										<td class="ticker_bold">OkCoin:</td>															<td style="color: rgb(255, 0, 0);" id="okcoinBTCCNY">0</td>								<td class="ticker_bold">Huobi:</td>																<td style="color: rgb(255, 0, 0);" id="huobiBTCCNY">0</td>								<td class="ticker_bold">BtcChina:</td>															<td style="color: rgb(0, 128, 0);" id="btcchinaBTCCNY">0</td>							</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td id="bitfinexLTCUSD">0</td>															<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceLTCUSD">0</td>																</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>										<td class="ticker_bold">Okcoin:</td>															<td style="color: rgb(0, 128, 0);" id="okcoinLTCCNY">0</td>									<td class="ticker_bold">Huobi:</td>																<td id="huobiLTCCNY">0</td>																</tr>																						</tbody></table>																				</div>																							';if(t>=495&&768>t)var e=' 			<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">														<tbody><tr>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td style="color: rgb(255, 0, 0);" id="bitfinexBTCUSD">0</td>								<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceBTCUSD">0</td>																<td class="ticker_bold">Bitstamp:</td>															<td id="bitstampBTCUSD">0</td>															</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>										<td class="ticker_bold">OkCoin:</td>															<td style="color: rgb(255, 0, 0);" id="okcoinBTCCNY">0</td>								<td class="ticker_bold">Huobi:</td>																<td style="color: rgb(255, 0, 0);" id="huobiBTCCNY">0</td>								<td class="ticker_bold">BtcChina:</td>															<td style="color: rgb(0, 128, 0);" id="btcchinaBTCCNY">0</td>							</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td id="bitfinexLTCUSD">0</td>															<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceLTCUSD">0</td>																<td rowspan="2" colspan="2">																					<div id="clock"></div>								</td>																							</tr>																							<tr>																							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>										<td class="ticker_bold">Okcoin:</td>															<td style="color: rgb(0, 128, 0);" id="okcoinLTCCNY">0</td>									<td class="ticker_bold">Huobi:</td>																<td id="huobiLTCCNY">0</td>																</tr>																						</tbody></table>																				</div>																							';if(t>=768&&1280>t)var e=' 			<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">														<tbody><tr>																							<td colspan="2">																					<div id="clock"></div>								</td>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td style="color: rgb(255, 0, 0);" id="bitfinexBTCUSD">0</td>								<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceBTCUSD">0</td>																<td class="ticker_bold">Bitstamp:</td>															<td id="bitstampBTCUSD">0</td>															<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>										<td class="ticker_bold">Bitfinex:</td>															<td id="bitfinexLTCUSD">0</td>															<td class="ticker_bold text-nowrap">BTCe:</td>													<td id="btceLTCUSD">0</td>																</tr>																							<tr>																							<td colspan="2">																				&nbsp; &nbsp;																				</td>																							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>										<td class="ticker_bold">OkCoin:</td>															<td style="color: rgb(255, 0, 0);" id="okcoinBTCCNY">0</td>								<td class="ticker_bold">Huobi:</td>																<td style="color: rgb(255, 0, 0);" id="huobiBTCCNY">0</td>								<td class="ticker_bold">BtcChina:</td>															<td style="color: rgb(0, 128, 0);" id="btcchinaBTCCNY">0</td>							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>										<td class="ticker_bold">Okcoin:</td>															<td style="color: rgb(0, 128, 0);" id="okcoinLTCCNY">0</td>									<td class="ticker_bold">Huobi:</td>																<td id="huobiLTCCNY">0</td>																</tr>																						</tbody></table>																				</div>																							';if(t>=1280&&1366>t)var e=' 			<div id="clock"></div>					<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">														<tbody><tr>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>							<td class="ticker_bold">Bitfinex:</td>							<div><td id="bitfinexBTCUSD">0</td></div>							<td class="ticker_bold text-nowrap">BTCe:</td>							<div><td id="btceBTCUSD">0</td></div>							<td class="ticker_bold">Bitstamp:</td>							<div><td id="bitstampBTCUSD">0</td></div>							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>							<td class="ticker_bold">Huobi:</td>							<div><td id="huobiBTCCNY">0</td></div>							<td class="ticker_bold">BtcChina:</td>							<div><td id="btcchinaBTCCNY">0</td></div>							<td class="ticker_bold">OkCoin:</td>							<div><td id="okcoinBTCCNY">0</td></div>							<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>							<td class="ticker_bold">Bitfinex:</td>							<div><td id="bitfinexLTCUSD">0</td></div>							<td class="ticker_bold text-nowrap">BTCe:</td>							<div><td id="btceLTCUSD">0</td></div>							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>							<td class="ticker_bold">Okcoin:</td>							<div><td id="okcoinLTCCNY">0</td></div>							<td class="ticker_bold">Huobi:</td>							<div><td id="huobiLTCCNY">0</td></div>						</tr>																						</tbody></table>																				</div>																							';if(t>1366)var e=' 			<div id="tickerTablediv" class="tickerTable" style="margin: auto;">								<table style="margin: auto;" class="text-nowrap">					<tr>							<td colspan="2">																					<div id="clock"></div>								</td>																							<td class="ticker_bold" style="color:#428bca;">BTCUSD:</td>							<td class="ticker_bold">Bitfinex:</td>							<div><td id="bitfinexBTCUSD">0</td></div>							<td class="ticker_bold text-nowrap">BTCe:</td>							<div><td id="btceBTCUSD">0</td></div>							<td class="ticker_bold">Bitstamp:</td>							<div><td id="bitstampBTCUSD">0</td></div>							<td class="ticker_bold" style="color:#428bca;">BTCCNY:</td>							<td class="ticker_bold">Huobi:</td>							<div><td id="huobiBTCCNY">0</td></div>							<td class="ticker_bold">BtcChina:</td>							<div><td id="btcchinaBTCCNY">0</td></div>							<td class="ticker_bold">OkCoin:</td>							<div><td id="okcoinBTCCNY">0</td></div>							<td class="ticker_bold" style="color:#428bca;">LTCUSD:</td>							<td class="ticker_bold">Bitfinex:</td>							<div><td id="bitfinexLTCUSD">0</td></div>							<td class="ticker_bold text-nowrap">BTCe:</td>							<div><td id="btceLTCUSD">0</td></div>							<td class="ticker_bold" style="color:#428bca;">LTCCNY:</td>							<td class="ticker_bold">Okcoin:</td>							<div><td id="okcoinLTCCNY">0</td></div>							<td class="ticker_bold">Huobi:</td>							<div><td id="huobiLTCCNY">0</td></div>						</tr>					</table>					</div>																							';document.getElementById("ticker").innerHTML=e,tickerLoaded=!1,setTimeout(function(){updateTicker()},500)}function footerFirstload(t){1280>t&&$("#footerContainer").load("../assets/include/divFooterSmall.php"),t>=1280&&$("#footerContainer").load("../assets/include/divFooterBig.php"),previousWidth=t}function footerResize(t){1280>t&&previousWidth>=1280&&$("#footerContainer").load("../assets/include/divFooterSmall.php"),t>=1280&&1280>previousWidth&&$("#footerContainer").load("../assets/include/divFooterBig.php"),previousWidth=t}function startTime(){var t=new Date,e=t.getUTCHours(),a=t.getMinutes(),o=t.getSeconds();e=checkTime(e),a=checkTime(a),o=checkTime(o),document.getElementById("clock").innerHTML=e+":"+a+":"+o+" (UTC)";setTimeout(function(){startTime()},500)}function checkTime(t){return 10>t&&(t="0"+t),t}function startwebsocketio(){var t="https://"+window.location.hostname+":3001";socket=io.connect(t,{secure:!0});var e=["combinedBTC"];socket.on("connect",function(){socket.emit("adduser",randomUsername()),e.forEach(function(t){socket.emit("switchChannel",t)})}),socket.on("dataupdate",function(t,e){try{jsonObject=e,jsonObject=JSON.parse(jsonObject)}catch(a){}try{var o=Object.keys(jsonObject);"ticker_rt"==o&&(e=jsonObject[o],updateTickerValues(e)),"bfxdataToday"!=o&&"bfxdataToday1Minute"!=o||(e=jsonObject[o],updateValues(e))}catch(a){}})}function bfxdataToday(){$.ajax({url:"../json/bfxdataToday.json",success:function(data){data=eval(data),updateValues(data)},cache:!1})}function bfxdataToday1minute(){$.ajax({url:"../json/bfxdataToday1Minute.json",success:function(data){data=eval(data),updateValues(data),bfxdataTodayloaded=!0},cache:!1})}function randomUsername(){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e=8,a="user_",o=0;e>o;o++){var i=Math.floor(Math.random()*t.length);a+=t.substring(i,i+1)}str="index",a+="_"+str;var d=new Date,s=d.getTime();return a+="_"+s}function updateTicker(){$.ajax({url:"../json/ticker_rt.json",type:"GET",dataType:"json",timeout:3e3,cache:!1,success:function(data){data=eval(data),updateTickerValues(data),tickerLoaded=!0},error:function(t,e,a){"timeout"===e?console.log("Error: ticker datarequest timeout"):console.log("Error: "+e)}})}function updateTickerValue(t,e){var a="#"+t;e=parseFloat(e);for(var o=$(a).text();-1!=o.indexOf(",");)o=o.replace(",","");o=parseFloat(o);var i=t.substr(t.length-6);if("BTCUSD"==i)var d=3;else if("LTCUSD"==i)var d=3;else if("BTCCNY"==i)var d=2;else if("LTCCNY"==i)var d=2;else var d=1;e>o&&(tickerLoaded&&$(a).css("color","green"),$(a).html(formatTickerNumber(e,d))),o>e&&(tickerLoaded&&$(a).css("color","red"),$(a).html(formatTickerNumber(e,d)))}function updateTickerValues(t){jQuery.each(t,function(t,e){updatedValue=e,updateTickerValue(t,updatedValue)})}function formatTickerNumber(t,e){t=t.toFixed(e)+"",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function updateValue(t,e){var a="#"+t;e=parseFloat(e);for(var o=$(a).text();-1!=o.indexOf(",");)o=o.replace(",","");o=parseFloat(o);var i=t.substr(0,t.length-6);if("priceBTCUSD"==t||"bidBTCUSD"==t||"askBTCUSD"==t||"minBTCUSD"==t||"maxBTCUSD"==t||"maxBTCUSD"==t||"volex"==i||"change24rel"==i||"volumeChange"==i||"vwap24BTCUSD"==t||"change24absBTCUSD"==t||"maxBTCUSD"==t)var d=3;else if("todayVolume"==i||"volumeWeek"==i||"volumeMonth"==i||"swapVolume1hUSD"==t||"swapVolume1hBTC"==t||"swapVolume1hLTC"==t||"swapVolume24hUSD"==t||"swapVolume24hBTC"==t||"swapVolume24hLTC"==t)var d=2;else if("changeAbsoluteTotalAvgRateUSD"==t||"changeAbsoluteTotalAvgRateBTC"==t||"changeAbsoluteTotalAvgRateLTC"==t)var d=7;else if("totalAmountUSD"==t||"totalAmountBTC"==t||"totalAmountLTC"==t||"changeAbsoluteTotalAmountUSD"==t||"changeAbsoluteTotalAmountBTC"==t||"changeAbsoluteTotalAmountLTC"==t)var d=0;else var d=5;e>o&&(bfxdataTodayloaded&&($(a).parent().parent().animate({backgroundColor:"rgba(90,151,112,0.3)"},300),$(a).parent().parent().animate({backgroundColor:"rgba(255,255,255,0)"},3e3)),"change24rel"==i||"volumeChange"==i||"lastSwapUSD"==t||"lastSwapBTC"==t||"lastSwapLTC"==t?$(a).html(formatNumber(e,d)+" %"):$(a).html(formatNumber(e,d))),o>e&&(bfxdataTodayloaded&&($(a).parent().parent().animate({backgroundColor:"rgba(204,63,51,0.3)"},300),$(a).parent().parent().animate({backgroundColor:"rgba(255,255,255,0)"},3e3)),"change24rel"==i||"volumeChange"==i||"lastSwapUSD"==t||"lastSwapBTC"==t||"lastSwapLTC"==t?$(a).html(formatNumber(e,d)+" %"):$(a).html(formatNumber(e,d))),"change24rel"!=i&&"volumeChange"!=i&&"change24abs"!=i&&"changeAbsoluteTotalAmountUSD"!=t&&"changeAbsoluteTotalAmountBTC"!=t&&"changeAbsoluteTotalAmountLTC"!=t&&"changeAbsoluteTotalAvgRateUSD"!=t&&"changeAbsoluteTotalAvgRateBTC"!=t&&"changeAbsoluteTotalAvgRateLTC"!=t||changeFontColor(a,e)}function updateValues(t){jQuery.each(t,function(t,e){updatedValue=e[0],updateValue(t,updatedValue)})}function changeFontColor(t,e){e>0&&$(t).css("color","green"),0>e&&$(t).css("color","red")}function formatNumber(t,e){t=t.toFixed(e)+"",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1,$2");return x1+x2}function round(t,e){return"undefined"==typeof e||0===+e?Math.round(t):(t=+t,e=+e,isNaN(t)||"number"!=typeof e||e%1!==0?NaN:(t=t.toString().split("e"),t=Math.round(+(t[0]+"e"+(t[1]?+t[1]+e:e))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]-e:-e))))}function requestData(){$.ajax({url:"../json/tickSwapUSD.json",success:function(point){var swapTick=eval(point);console.log(swapTick[2]),swapTick[2]>lastSwapTimestamp&&addNewPoints(),setTimeout(requestData,6e3)},cache:!1})}function addNewPoints(){$.ajax({url:"../json/last50SwapsUSD.json",success:function(data){var amountSeries=graphLastSwapsUSD.series[1],rateSeries=graphLastSwapsUSD.series[0],swapJson=eval(data),dataLength=data.length;if(lastSwapInJsonTimestamp=parseInt(data[dataLength-1][0]),console.log(lastSwapInJsonTimestamp),lastSwapInJsonTimestamp>lastSwapTimestamp){var lastRow=dataLength-1;for(i=0;i<dataLength;i++){var swapTimestamp=parseInt(data[i][0]);if(swapTimestamp>lastSwapTimestamp){swapRate=parseFloat(data[i][1]),swapAmount=data[i][2];var pointRate=[swapTimestamp,swapRate],pointVolume=[swapTimestamp,swapAmount];console.log(pointRate),console.log(pointVolume),i<lastRow&&(graphLastSwapsUSD.series[1].addPoint(pointVolume,!1,!1),graphLastSwapsUSD.series[0].addPoint(pointRate,!1,!1)),i==lastRow&&(graphLastSwapsUSD.series[1].addPoint(pointVolume,!0,!0),graphLastSwapsUSD.series[0].addPoint(pointRate,!0,!0))}}var offset=-1;filelink="../tables/swapstats/lastSwapsTableUSD.php?offset="+offset,$("#lastSwapsTableDiv").load(filelink),filelink="../tables/swapstats/lendbookOffersUSD.php?offset="+offset,$("#offersTableDiv").load(filelink,function(){$("#offersTbody").scrollTop($("#offersTbody")[0].scrollHeight)}),filelink="../tables/swapstats/lendbookDemandsUSD.php?offset="+offset,$("#demandsTableDiv").load(filelink),lastSwapTimestamp=parseInt(data[dataLength-1][0])}},cache:!1})}var tickerLoaded=!1,socket,previousWidth;$(document).ready(function(){var t=$(window).width();tickerResize(t),footerFirstload(t),startwebsocketio(),startTime()}),$(window).resize(function(){var t=$(window).width();tickerResize(t),footerResize(t)});var graphTotalLendsUSD;$(function(){$.getJSON("../../json/totalLendsRateUSDMonth.json",function(t){$.getJSON("../json/totalLendsAmountUSDMonth.json",function(e){$.getJSON("../json/totalLendsUnusedAmountUSDMonth.json",function(a){Highcharts.setOptions({global:{useUTC:!0}});var o=[["hour",[1]],["hour",[2]],["hour",[3]],["hour",[6]],["hour",[12]]];graphTotalLendsUSD=new Highcharts.StockChart({chart:{type:"spline",renderTo:"graphTotalSwapsUSD"},title:{text:"Average Rate on active USD Margin Funding (=FRR) / Total sum of active USD Margin Funding",style:{color:"rgb(55,77,108)",fontSize:"22px",display:"none"},floating:!1},navigation:{buttonOptions:{verticalAlign:"top",x:-40}},scrollbar:{enabled:!1},rangeSelector:{inputPosition:{y:30},buttons:[{type:"hour",count:12,text:"12h"},{type:"hour",count:24,text:"24h"},{type:"day",count:3,text:"3d"},{type:"day",count:7,text:"7d"},{type:"month",count:1,text:"1m"},{type:"month",count:2,text:"2m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"month",count:12,text:"12m"},{type:"all",text:"All"}],selected:3,inputEnabled:!0,inputPosition:{y:0,x:-100}},xAxis:{gridLineWidth:1,title:{enabled:!0,text:"Time (UTC)",style:{fontWeight:"normal"}}},yAxis:[{opposite:!1,minorTickInterval:"auto",minorTickColor:"#FEFEFE",gridLineWidth:1,labels:{align:"right"},title:{enabled:!0,text:"Average Rate per day on Active USD Margin Funding",style:{fontWeight:"normal"}}},{minorTickInterval:"auto",minorTickColor:"#FEFEFE",gridLineWidth:1,labels:{align:"left"},title:{enabled:!0,text:"Total sum of Active USD Margin Funding",style:{fontWeight:"normal"}},opposite:!0}],plotOptions:{series:{animation:!1,lineWidth:1},area:{stacking:"normal",lineWidth:1,series:{lineWidth:1}}},tooltip:{valueDecimals:4},series:[{name:"Average Rate per day on USD Margin Funding",data:t,type:"spline",color:"#40638F",dataGrouping:{approximation:"high",units:o}},{name:"Total sum of USD Margin Funding",data:e,yAxis:1,color:"rgba(0,100,0,1.0)",dataGrouping:{approximation:"high",units:o}},{name:"Unused sum of USD Margin Funding",color:"rgba(150,0,0,1)",data:a,yAxis:1,dataGrouping:{approximation:"high",units:o}}]})})})})});var graphLastSwapsUSD,lastSwapTimestamp;$(function(){$.getJSON("../json/vwarHourlyUSD.json",function(t){Highcharts.setOptions({global:{useUTC:!0}});var e=[],a=[],o=t.length;for(i=0;i<o;i++){e.push([parseInt(t[i][0]),t[i][1]]);var d=t[i][2];a.push([parseInt(t[i][0]),d])}graphLastSwapsUSD=new Highcharts.StockChart({chart:{renderTo:"vwarUSDChart"},navigation:{buttonOptions:{verticalAlign:"top",x:-40}},rangeSelector:{inputPosition:{y:30},buttons:[{type:"hour",count:12,text:"12h"},{type:"hour",count:24,text:"24h"},{type:"day",count:3,text:"3d"},{type:"day",count:7,text:"7d"},{type:"month",count:1,text:"1m"},{type:"month",count:2,text:"2m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"month",count:12,text:"12m"},{type:"all",text:"All"}],selected:3,inputEnabled:!0,inputPosition:{y:0,x:-100}},scrollbar:{enabled:!1},title:{text:"Vwar USD Swaps",style:{color:"rgb(55,77,108)",fontSize:"22px",display:"none"},floating:!1},xAxis:{type:"datetime",gridLineWidth:1,minTickInterval:6e4,title:{enabled:!0,text:"Time (UTC)",style:{fontWeight:"normal"}}},yAxis:[{title:{text:"1 Hour Vwar (% / day)"},labels:{align:"left"},minorTickInterval:"auto",opposite:!0},{title:{color:"rgba(0,0,0,0.4)",text:"Volume (USD)"},labels:{align:"right"},opposite:!1}],tooltip:{valueDecimals:5},plotOptions:{series:{animation:!1,groupPixelWidth:2},candlestick:{color:"#DD2F29",upColor:"#87DA3B",lineColor:"#666"}},series:[{type:"spline",name:"Swap Rate USD",lineWidth:1,color:"#428bca",data:e,dataGrouping:{enabled:!0,groupPixelWidth:2,approximation:"high",units:[["hour",[1]],["hour",[2]],["hour",[3]],["hour",[6]],["hour",[12]]]}},{type:"column",name:"Volume",data:a,color:"rgba(0,0,0,0.4)",yAxis:1,dataGrouping:{enabled:!0,groupPixelWidth:2,units:[["hour",[1]],["hour",[2]],["hour",[3]],["hour",[6]],["hour",[12]]]}}]})})});